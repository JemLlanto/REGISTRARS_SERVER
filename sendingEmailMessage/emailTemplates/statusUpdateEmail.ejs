<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Request Notification - Email Compatible</title>
  </head>
  <body
    style="
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 5px;
      color: #ffffff;
    "
  >
    <div
      style="
        text-align: center;
        padding: 25px 20px;
        margin: auto;
        max-width: 500px;
        background-color: #0a1042;
        border-radius: 12px;
      "
    >
      <!-- Logo Section -->
      <div style="text-align: center; margin-bottom: 20px">
        <img
          src="https://res.cloudinary.com/dhgpir5ae/image/upload/v1746423700/cvsu-logo_iydkt9.png"
          alt="CVSU Logo"
          style="width: 100px; height: 100px; display: block; margin: 0 auto"
        />
      </div>

      <div style="text-align: center; margin-bottom: 20px">
        <img
          src="https://res.cloudinary.com/dhgpir5ae/image/upload/v1746423699/cvsu_x9udii.png"
          alt="CVSU Logo"
          style="width: 50%; height: auto; display: block; margin: 0 auto"
        />
      </div>

      <!-- Content Section -->
      <div style="text-align: center; padding: 15px 10px; color: #ffffff">
        <p style="margin: 0 0 15px 0; font-size: 16px; color: #ffffff">
          Greetings from CvSU-CCAT Campus Registrar's Office!
        </p>
        <h2 style="color: #ffffff; font-size: 20px; margin: 0 0 10px 0">
          Request #<%= requestID %>
        </h2>
        <p style="margin: 0 0 15px 0; font-size: 16px; color: #ffffff">
          <%= message %>
        </p>
      </div>

      <% if (newStatus !== 'cancelled' && newStatus !== 'unclaimed') { %>
      <!-- Email-Compatible Progress Bar -->
      <div style="margin: 25px 0; text-align: center; position: relative">
        <!-- Progress Labels -->
        <table
          style="width: 100%; margin-bottom: 10px"
          cellpadding="0"
          cellspacing="0"
        >
          <tr>
            <td
              style="
                width: 25%;
                text-align: center;
                font-size: 12px;
                color: #ffffff;
              "
            >
              Pending
            </td>
            <td
              style="
                width: 25%;
                text-align: center;
                font-size: 12px;
                color: #ffffff;
              "
            >
              Processing
            </td>
            <td
              style="
                width: 25%;
                text-align: center;
                font-size: 12px;
                color: #ffffff;
              "
            >
              For Pick-up
            </td>
            <td
              style="
                width: 25%;
                text-align: center;
                font-size: 12px;
                color: #ffffff;
              "
            >
              Completed
            </td>
          </tr>
        </table>

        <% let step = 0; if (newStatus === 'processing') step = 1; else if
        (newStatus === 'ready to pickup') step = 2; else if (newStatus ===
        'completed') step = 3; %>

        <!-- Progress Steps using Table -->
        <table
          style="width: 100%; margin-bottom: 5px"
          cellpadding="0"
          cellspacing="0"
        >
          <tr>
            <!-- Step 1 -->
            <td style="width: 25%; text-align: center">
              <div
                style="
                width: 25px;
                height: 25px;
                background-color: <%= step >= 0 ? '#00ccff' : '#ccc' %>;
                border-radius: 50%;
                color: <%= step >= 0 ? '#fff' : '#333' %>;
                font-weight: bold;
                line-height: 25px;
                margin: 0 auto;
              "
              >
                1
              </div>
            </td>

            <!-- Step 2 -->
            <td style="width: 25%; text-align: center">
              <div
                style="
                width: 25px;
                height: 25px;
                background-color: <%= step >= 1 ? '#00ccff' : '#ccc' %>;
                border-radius: 50%;
                color: <%= step >= 1 ? '#fff' : '#333' %>;
                font-weight: bold;
                line-height: 25px;
                margin: 0 auto;
              "
              >
                2
              </div>
            </td>

            <!-- Step 3 -->
            <td style="width: 25%; text-align: center">
              <div
                style="
                  width: 25px;
                  height: 25px;
                  background-color: <%= step >= 2 ? '#00ccff' : '#ccc' %>;
                  border-radius: 50%;
                  color: <%= step >= 2 ? '#fff' : '#333' %>;
                  font-weight: bold;
                  line-height: 25px;
                  margin: 0 auto;
                "
              >
                3
              </div>
            </td>

            <!-- Step 4 -->
            <td style="width: 25%; text-align: center">
              <div
                style="
                width: 25px;
                height: 25px;
                background-color: <%= step >= 3 ? '#00ccff' : '#ccc' %>;
                border-radius: 50%;
                color: <%= step >= 3 ? '#fff' : '#333' %>;
                font-weight: bold;
                line-height: 25px;
                margin: 0 auto;
              "
              >
                4
              </div>
            </td>
          </tr>
        </table>

        <% let width = '0%'; if (newStatus === 'processing') width = '37.5%';
        else if (newStatus === 'ready to pickup') width = '63.5%'; else if
        (newStatus === 'completed') width = '100%'; %>

        <!-- Progress Bar using Table -->
        <table
          style="
            width: 100%;
            background-color: #ffffff;
            height: 8px;
            border-radius: 4px;
          "
          cellpadding="0"
          cellspacing="0"
        >
          <tr>
            <td
              style="
                width: <%= width %>;
                background-color: #00ccff;
                height: 8px;
                border-radius: 4px;
              "
            ></td>
            <td
              style="
                width: 65%;
                background-color: #ffffff;
                height: 8px;
                border-radius: 4px;
              "
            ></td>
          </tr>
        </table>
      </div>
      <% } %>

      <!-- Button -->
      <div style="text-align: center; margin: 20px 0">
        <a
          href="<%= URL %>"
          style="
            display: inline-block;
            padding: 12px 20px;
            background-color: #f0f0f0;
            color: #27272c;
            text-decoration: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
          "
          >Check Request</a
        >
      </div>
      <div>
        <h5 style="margin: 35px 0 0 0; color: #dcdcdc">For questions:</h5>
        <h5 style="margin: 0 0 0 0; color: #dcdcdc">
          <%= fullName %>(<%= adminEmail %>)
        </h5>
      </div>

      <!-- Footer -->
      <div
        style="
          text-align: center;
          margin-top: 30px;
          padding-top: 20px;
          border-top: 1px solid #ffffff;
        "
      >
        <p style="margin: 0; color: #cccccc; font-size: 14px">
          &copy; 2025 CvSU-CCAT Campus. All rights reserved.
        </p>
      </div>
    </div>
  </body>
</html>
